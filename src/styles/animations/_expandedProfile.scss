$transition-time: 1.5s;
$empty-list: ();

@mixin step-animate($selector, $styles, $special) {
  $total-steps: 3;
  $transition: "";
  $reverse-transition: "";
  $total-time: $transition-time * $total-steps;

  @each $style in $styles {
    $property: map-get(
      $map: $style,
      $key: "property"
    );
    $step: map-get(
      $map: $style,
      $key: "step"
    );

    @if ($transition != "") {
      $transition: $transition + ", ";
    }

    @if ($reverse-transition != "") {
      $reverse-transition: $reverse-transition + ", ";
    }

    $base-transition: "#{$property} #{$transition-time} ease ";
    $delay: $transition-time * ($step - 1);
    $reverse-delay: $total-time - ($step * $transition-time);

    $transition: $transition + $base-transition + #{$delay};
    $reverse-transition: $reverse-transition +
      $base-transition +
      #{$reverse-delay};
  }

  #{$selector} {
    transition: #{$transition};
  }

  &.reverse {
    #{$selector} {
      transition: #{$reverse-transition};
    }
  }

  &.#{$special} {
    #{$selector} {
      @content;
    }
  }
}

main {
  @include step-animate(
    ".left-column",
    (
      append(
          $empty-list,
          (
            "property": "min-width",
            "step": 2
          )
        )
        // ("property": "transform", "step": 1),
        // ("property": "height", "step": 1),
    ),
    "expanded-profile"
  ) {
    // transform: translateY(-192px);
    // height: calc(100% + 192px);
    min-width: 100%;
  }

  // @include step-animate(
  //   ".left-column .title, .left-column .profile-label",
  //   append(
  //     $empty-list,
  //     (
  //       "property": "transform",
  //       "step": 1
  //     )
  //   ),
  //   "expanded-profile"
  // ) {
  //   transform: translateY(-1in);
  // }

  @include step-animate(
    ".left-column .skills li .spacer",
    (
      ("property": "flex-grow", "step": 2),
      ("property": "min-width", "step": 2),
      ("property": "min-height", "step": 2)
    ),
    "expanded-profile"
  ) {
    flex-grow: 0;
    min-width: 60px;
    min-height: 40px;
  }

  @include step-animate(
    ".left-column .initially-hidden",
    (
      append(
        $empty-list,
        (
          "property": "opacity",
          "step": 3
        )
      )
    ),
    "expanded-profile"
  ) {
    opacity: 1;
  }

  @include step-animate(
    ".right-column",
    append(
      $empty-list,
      (
        "property": "transform",
        "step": 2
      )
    ),
    "expanded-profile"
  ) {
    transform: translateX(1in);
  }
}

// .right-column {
//   // @include step-animate(
//   //   ".chevrons-row",
//   //   append(
//   //     $empty-list,
//   //     (
//   //       "property": "min-height",
//   //       "step": 1
//   //     )
//   //   ),
//   //   "lowered"
//   // ) {
//   //   min-height: 100%;
//   // }

//   @include step-animate(
//     ".history",
//     append(
//       $empty-list,
//       (
//         "property": "margin-top",
//         "step": 1
//       )
//     ),
//     "lowered"
//   ) {
//     margin-top: 1in;
//   }
// }

// .chevrons.vertical {
//   flex-direction: column;
//   justify-content: space-between;
// }
